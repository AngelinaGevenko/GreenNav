<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-slider/paper-slider.html">

<link rel="import" href="../bower_components/iron-iconset/iron-iconset.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-icons/av-icons.html">
<link rel="import" href="../bower_components/iron-icons/maps-icons.html">
<link rel="import" href="../bower_components/iron-icons/image-icons.html">
<link rel="import" href="../bower_components/iron-icons/hardware-icons.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">

<link rel="import" href="../bower_components/neon-animation/animations/fade-in-animation.html">
<link rel="import" href="../bower_components/neon-animation/neon-animation-runner-behavior.html">
<link rel="import" href="gn-test.html">


<dom-module id="gn-directions-menu">
  <template>
    <style>
      :host {
        display: block;
        --app-primary-color: #1B5E20;
        --app-secondary-color: black;
      }
      
      paper-tabs {
        --paper-tabs-selection-bar-color: var(--app-primary-color);
      }

      #route {
        padding: 0 20px;
      }

      #addStopovers {
        margin-top: 10px;
        margin-bottom: -10px;
      }

      #batteryState {
        margin-top: 15px;
      }

      paper-input {
        --paper-input-container-focus-color: var(--app-primary-color);
      }

      paper-slider {
        --paper-slider-knob-color: var(--app-primary-color);
        --paper-slider-active-color: var(--app-primary-color);
        --paper-slider-pin-color: var(--app-primary-color);
      }
    </style>

    <paper-tabs noink selected="{{selected}}">
      <paper-tab>ROUTE</paper-tab>
      <paper-tab>ERREICHBARKEIT</paper-tab>          
    </paper-tabs>

    <iron-pages selected="{{selected}}">
      <div id="route">
        <div>
          <paper-input label="From"></paper-input>

          <!-- Add Stopovers -->
          <template is="dom-repeat" items="{{intermediateobjects}}">
            <paper-input label="{{item.name}}" value="{{item.object}}">
              <div suffix></div>
              <!-- Should be icon="icons:delete" -->
              <paper-icon-button suffix value="{{index}}" icon="av:not-interested" on-click="removeStopover"></paper-icon-button>
            </paper-input>
          </template>
          <paper-input label="To"></paper-input>
        </div>

        <div id="addStopovers">
          <paper-icon-button icon="av:library-add" on-click="addStopover"></paper-icon-button>
          <span>Add Stopovers</span>
        </div>

        <!-- Vehicle -->
        <paper-dropdown-menu label="Vehicle">
          <paper-listbox class="dropdown-content">
            <template is="dom-repeat" items="{{vehicles}}">
              <paper-item>{{item}}</paper-item>
            </template>
          </paper-listbox>
        </paper-dropdown-menu>

        <!-- Battery State -->
        <div id="batteryState">
          <div>Battery State</div>
          <paper-slider pin value="{{battery}}" pressed></paper-slider>
        </div>

        <div class="card-actions">
          <div class="right">
            <paper-icon-button 
                icon="maps:directions"
                onclick="document.querySelector('gn-api').getRoute()">
            </paper-icon-button>
          </div>
        </div>
      </div>
      <div>
        <div>Page 2</div>
        <gn-test></gn-test>
      </div>
    </iron-pages>

  </template>
  <script>
    Polymer({
      is: 'gn-directions-menu',

      behaviors: [Polymer.NeonAnimationRunnerBehavior],
      
      properties:{
        /**
         * Contains all stopovers
         */
        intermediateobjects: {
          type: Array,
          value: function() {
            return [];
          }
        },

        /**
         * Holds supported vehicles 
         */
        vehicles: {
          type: Array,
          notify: true
        },

        /**
         * Manages neon animations
         */
        animationConfig: {
          type: Object,
          value: function() {
            return {
              'entry': [{
                name: 'fade-in-animation',
                node: this.$.submenu,
              }],
            }
          }
        }
      },

      /**
       * Selects the 'Route' tab in the sidebar.
       */
      ready: function() {
        this.selected = 0;
        this.battery = 100;
      },

      /**
       * Adds a stopover object to the intermediate objects list
       */
      addStopover: function() {
          this.push('intermediateobjects', {name: "New Stopover"});
      },

      /**
       * Removes a stopover object from the intermediate objects list
       */
      removeStopover: function(event, index) {
        var index = this.intermediateobjects.indexOf(event.model.item);
        this.splice('intermediateobjects', index, 1)
      }
    });
  </script>
</dom-module>
